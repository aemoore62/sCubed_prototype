<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <?!= HtmlService.createHtmlOutputFromFile('style_sheet').getContent(); ?>
  <?!= HtmlService.createHtmlOutputFromFile('feature_output_js').getContent(); ?>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
</head>

<body style="font-family:Arial">
  Currently, sCubed only outputs process specifications to a handful of formats.
  <br>
  <br>
  <button type="button" class="collapsible">README</button>
  <div class="warning">
  Output from sCubed is licensed <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. You are free to copy and use output from sCubed—modified or unmodified—with regard to our terms of service.
  <br> 
  <br>
  If you are outputting data for a repository, sCubed will automatically generate a citation and acknowledgement in the most appropriate field(s). Please do not modify this auto-generated citation and acknowledgement as they serve to track use of sCubed.
  <br>
  <br>
  You are responsible for ensuring that you comply with any guidelines for plagiarism and duplication set forth by the resource(s) that you submit content to. If you copy content from sCubed into a scientific publication, we encourage you to mention the following in your cover letter to the journal:
  <br>
  <br>
  
    <blockquote>"Some content in our manuscript was automatically generated by sCubed, an open-source metadata management system. Content output by sCubed is licensed CC BY 4.0. sCubed does not use a large language model to generate text. Instead, we authored tabular metadata in sCubed and then used sCubed to gather and modify our tabular metadata into natural language. sCubed is transparent in how it transforms tabular metadata into natural language:"</blockquote>

 
  </div>

  <br>
  <br>
 
  <form name="output" id="output_frm">
    <label for="outputType">Select a type of output:</label>
    <br>
    <select class="custom-select" id="outputType" name="output_type" onchange="displayOutputOptions()">
      <option value="none" selected disabled hidden>Select</option>
      
      <option value="BioSample">BioSample XML</option>
      <option value="BioSamples">BioSamples JSON</option>
      <option value="Frictionless Data Package">Frictionless Data Package JSON</option>
      <option value="GEOarchive">GEOarchive GSHEET</option>
      <option value="ISA-tab">ISA-Tab Tabular & JSON</option>
      <option value="LaTeX">LaTeX</option>
      <option value="mwTab">mwTab Tabular & JSON</option>
      <option value="NMR-STAR">NMR-STAR STAR</option>
      <option value="plain text">plain text</option>
      <option value="SRA">SRA Tabular</option>
    </select>  

    <div id="loadingReportingWorkflows" style="display:none">
      <p style="background-color:orange;">Loading your reporting workflows.</p>

    </div>

    <div id="rptdiv" style="display:block">
      <br>
      <label for="List">Select a reporting workflow:</label>
      <br>
      <select class="custom-select" name="reporting_Workflow" id="reportingWorkflow" onchange="handleProcessIDs()">
         <option value="nochange" selected disabled hidden>Select a workflow</option>
         
       </select>
      <br>
    </div>  

   <div id="plainTextDiv" style="display:block">
      <br>
      <label for="List">Select a process specification:</label>
      <br>
      <select class="custom-select" name="processSpecification" id="processSpecification" onchange="handlePlainText()">
         <option value="nochange" selected disabled hidden>Select a process specification</option>
         
       </select>
      <br>
    </div>  
    
  </form>
  <br>
  <div class="container2" id="labelFreeText" style="display:none">
    <div class="label">
      Free text:
  </div>  

  <div class="copy-text" id="outputFreeText" style="display:none">
    <input type="text" class="text" id="outputFreeTextField" value=""/>
    <button><i class="fa fa-clone"></i></button>
  </div>  
<br>
<br>
  <div class="container2" id="labelSteps" style="display:none">
    <div class="label">
      Step-by-step:
  </div>  

  <div class="copy-text" id="outputSteps" style="display:none">
    <input type="text" class="text" id="outputStepsField" value=""/>
    <button><i class="fa fa-clone"></i></button>
  </div>    


</body>

<script type='text/javascript'>
  window.onload = function(){ 
  //google.script.run.withSuccessHandler(dynamicallyAddFields).getListOptions(); 
    
  google.script.run.withSuccessHandler(dynamicallyPopulateLists).getList(); 
  //google.script.run.getList(); 

  }

  let copyTextElement = document.querySelectorAll(".copy-text")

  document.querySelectorAll(".copy-text").forEach(copyTextElement => copyTextElement.querySelector("button").addEventListener("click", 
  () => {
    let input = copyTextElement.querySelector("input.text");
    input.select();
    document.execCommand("copy");
    copyTextElement.classList.add("active");
    window.getSelection().removeAllRanges();
    setTimeout(function() {
      copyTextElement.classList.remove("active");
    }, 3000);
  }))


let collapsibleElements = document.getElementsByClassName("collapsible");

for (var collapsibleElementIndex = 0; collapsibleElementIndex < collapsibleElements.length; collapsibleElementIndex++) {
  collapsibleElements[collapsibleElementIndex].addEventListener("click", function() {
    this.classList.toggle("active");
    let warning = this.nextElementSibling;

    if (warning.style.display == "block") {
      warning.style.display = "none";

    } else {
      warning.style.display = "block";
    }
  });

}

</script>
